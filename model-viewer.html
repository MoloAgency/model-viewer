<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Model Viewer</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>
    <!-- Model Viewer Element -->
    <model-viewer id="myModel" style="width: 100%; height: 500px;"
        src="https://moloagency.github.io/3dmodels-glassopenings/Style%201%20Test.glb"
        auto-rotate camera-controls>
    </model-viewer>

    <!-- Script to Listen for Messages and Update the Model -->
    <script>
        window.addEventListener('message', function(event) {
            const config = event.data;
            const modelViewer = document.getElementById('myModel');

            console.log("Received message:", config);

            // Simple update for material variants
            if (config.Handle) {
                modelViewer.setAttribute('handle-variant', config.Handle);
                console.log("Handle variant set to:", config.Handle);
            }
            if (config.OuterFrame) {
                modelViewer.setAttribute('outer-frame-variant', config.OuterFrame);
                console.log("OuterFrame variant set to:", config.OuterFrame);
            }
            if (config.Sill) {
                modelViewer.setAttribute('sill-variant', config.Sill);
                console.log("Sill variant set to:", config.Sill);
            }
            if (config.WindowFrame) {
                modelViewer.setAttribute('window-frame-variant', config.WindowFrame);
                console.log("WindowFrame variant set to:", config.WindowFrame);
            }
            if (config.Box018) {
                modelViewer.setAttribute('box018-variant', config.Box018);
                console.log("Box018 variant set to:", config.Box018);
            }
            if (config.animation) {
                modelViewer.setAttribute('animation-name', config.animation);
                console.log("Animation set to:", config.animation);
            }
            if (config.Vent) {
                modelViewer.setAttribute('trickel-vent', config.Vent);
                console.log("Trickel vent set to:", config.Vent);
            }
        });
    </script>
</body>
</html>
